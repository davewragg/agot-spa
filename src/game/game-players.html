<h4>Players</h4>

<table class="table">
  <thead>
  <tr>
    <th>Player</th>
    <th>Faction & Agenda</th>
    <th></th>
  </tr>
  </thead>
  <tbody>
  <tr *ngIf="!gamePlayers?.length || gamePlayers?.length < 2">
    <th colspan="5" class="alert alert-danger">Need more players over here</th>
  </tr>
  <tr *ngFor="#gamePlayer of gamePlayers; #index=index">
    <td>{{ gamePlayer.player.name }}</td>
    <td *ngIf="editing">
      <agot-game-player-form [gamePlayer]="gamePlayer" (updatePlayer)="editing = false"></agot-game-player-form>
    </td>
    <td *ngIf="!editing">
      {{ gamePlayer.faction.factionName }},
      {{ gamePlayer.agenda?.title }}
      {{ gamePlayer.secondaryFaction?.factionName }}
    </td>
    <td>
      <button type="button" class="btn btn-info" (click)="editing = !editing">{{ editing ? 'Cancel' : 'Edit' }}</button>
      <button type="button" class="btn btn-danger" (click)="onRemove(index)">Remove</button>
    </td>
  </tr>
  </tbody>
</table>

<div class="form-group">
  <h5>Add player</h5>
  <agot-game-player-form (updatePlayer)="onNewPlayerAdd($event)" *ngIf="addActive"></agot-game-player-form>
</div>

<div class="form-group">
  <h5>Who won?</h5>
  <div class="form-group btn-group" date-toggle="buttons">
    <label class="btn btn-primary" *ngFor="#gamePlayer of gamePlayers" [class.active]="gamePlayer.isWinner">
      <input type="radio" name="isWinner" value="true"
             autocomplete="off" [checked]="gamePlayer.isWinner"
             (change)="onWinnerChange(gamePlayer)"> {{ gamePlayer.player.name }}
    </label>

    <label class="btn btn-primary-outline">
      <input type="radio" name="isWinner" value="true" autocomplete="off"
             (change)="onWinnerChange()"> Draw/Unfinished
    </label>
  </div>
</div>
